<div id="invoice" class="invoice-card" *ngIf="devis">
  <!-- ======== EN-TÃŠTE ======== -->
  <header class="inv-header d-flex justify-content-between align-items-start mb-4">
    <div class="left">
      <img [src]="header.companyLogo" alt="logo" width="120" class="mb-2" />
      <h2 class="text-primary">{{ header.companyName }}</h2>
      <div>{{ header.address }}</div>
      <div>TÃ©l : {{ header.phone }}</div>
      <div>Email : {{ header.email }}</div>
      <div>SIRET : {{ header.siret }} - Code APE : {{ header.codeAPE }}</div>
      <div>NÂ° TVA : {{ header.tva }}</div>
    </div>

    <div class="right text-end">
      <h4 class="text-uppercase">Devis NÂ° {{ header.devisNumber }}</h4>
      <div>Date : {{ header.date | date:'dd/MM/yyyy' }}</div>
    </div>
  </header>

  <!-- ======== CLIENT ======== -->
  <section class="client-section mb-4 border p-3 rounded bg-light">
    <h5 class="mb-2 text-primary">Informations Client</h5>
    <div><strong>Nom :</strong> {{ client.nom }}</div>
    <div><strong>Adresse :</strong> {{ client.adresse }}</div>
    <div><strong>TÃ©lÃ©phone :</strong> {{ client.telephone }}</div>
    <div><strong>Email :</strong> {{ client.email }}</div>
  </section>

  <!-- ======== TABLEAU DES LIGNES ======== -->
  <section class="items-section">
    <h5 class="mb-3 text-primary">DÃ©tails du devis</h5>
    <table class="table table-bordered text-center">
      <thead class="table-light">
        <tr>
          <th>LibellÃ©</th>
          <th>UnitÃ©</th>
          <th>QuantitÃ©</th>
          <th>Prix Unitaire (â‚¬)</th>
          <th>Montant Total (â‚¬)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ligne of items">
          <td>{{ ligne.libelle }}</td>
          <td>{{ ligne.unite }}</td>
          <td>{{ ligne.quantite }}</td>
          <td>{{ ligne.prixUnitaire | number:'1.2-2' }}</td>
          <td>{{ ligne.montantTotal | number:'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>

    <aside class="summary text-end mt-4">
      <div><strong>Total HT :</strong> {{ totalHT | number:'1.2-2' }} â‚¬</div>
      <div><strong>TVA (20%) :</strong> {{ tva | number:'1.2-2' }} â‚¬</div>
      <div class="fw-bold fs-5"><strong>Total TTC :</strong> {{ totalTTC | number:'1.2-2' }} â‚¬</div>
      <button class="btn btn-primary mt-3" (click)="exportAsPDF()">ðŸ“„ Exporter en PDF</button>
    </aside>
  </section>

  <!-- ======== GRAPHIQUES ======== -->
  <section class="charts mt-5">
    <div class="chart-box mb-4">
      <h4>RÃ©partition des coÃ»ts</h4>
      <canvas baseChart [data]="pieChartData" [options]="pieChartOptions" chartType="pie"></canvas>
    </div>
    <div class="chart-box">
      <h4>Montant par ligne</h4>
      <canvas baseChart [data]="barChartData" [options]="barChartOptions" chartType="bar"></canvas>
    </div>
  </section>

  <!-- ======== PIED DE PAGE ======== -->
  <footer class="invoice-footer text-center mt-5 border-top pt-3">
    <p class="mb-1">Conditions de rÃ¨glement : 20% Ã  la signature, solde Ã  la fin des travaux.</p>
    <p class="fw-bold mb-0">SEN FIBEM France â€“ BON POUR ACCORD</p>
  </footer>
</div>

<!-- Si aucun devis -->
<div *ngIf="!devis" class="alert alert-info text-center mt-4">
  Aucun devis disponible pour le moment.
</div>
